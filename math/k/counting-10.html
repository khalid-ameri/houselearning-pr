<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Kindergarten â€” Counting to 10</title>
<style>
:root{
  --bg:#fbf3ff; --panel:#fff; --accent:#c084fc; --accent2:#6b21a8; --ok:#16a34a; --bad:#ef4444; --muted:#566270;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter, "Segoe UI", Arial, sans-serif;background:var(--bg);color:#330e44;}
header{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;padding:22px 12px;text-align:center}
header h1{margin:0;font-size:clamp(20px,3vw,30px)}
main{max-width:1100px;margin:20px auto;padding:14px}
section{background:var(--panel);border-radius:12px;padding:16px;margin:14px 0;box-shadow:0 8px 24px rgba(2,6,23,0.06)}
h2{color:var(--accent2);margin:0 0 10px 0}
p{margin:8px 0;font-size:1.1rem;}
.controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
button{background:var(--accent2);color:#fff;border:none;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700}
button.secondary{background:#c084fc;color:#fff}
button.ghost{background:#e9d5ff;color:var(--accent2);border:1px solid #d8b4fe}
button.warn{background:#f97316}
input[type=number], input[type=text], select{padding:8px;border-radius:8px;border:1px solid #d8b4fe;font-size:1rem}
.grid{display:grid;gap:10px}
.grid.cols-4{grid-template-columns:repeat(4,1fr)}
.tile{background:#fff;padding:12px;border-radius:8px;text-align:center;border:1px solid #d8b4fe;cursor:pointer;font-weight:700}
.status{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.pill{background:#dcfce7;color:var(--ok);padding:6px 10px;border-radius:999px;font-weight:800}
.muted{color:var(--muted)}
footer{text-align:center;padding:12px;margin-top:8px;color:#525252}
.answer{font-weight:800;margin-top:8px}
.ok{color:var(--ok)}
.bad{color:var(--bad)}
canvas{background:#fff;border:1px solid #d8b4fe;border-radius:8px;display:block;margin-top:10px;}
</style>
</head>
<body>
<header>
<h1>Kindergarten â€” Counting to 10</h1>
<p style="margin:6px 0 0 0;opacity:.95">Interactive practice â€¢ video tutorial â€¢ speed quiz</p>
</header>

<main>
<section aria-labelledby="introTitle">
<h2 id="introTitle">Let's Learn to Count! ğŸ”¢</h2>
<p>Counting is fun! We can count things like our fingers, toys, or yummy cookies. Counting helps us know how many things we have. Let's learn to count all the way to 10! âœ¨</p>
<div class="status" style="margin-top:8px">
  <div class="pill" id="score">Score: 0</div>
  <div class="muted" id="streak">Streak: 0</div>
</div>
</section>

<section aria-labelledby="videoTitle">
<h2 id="videoTitle">Counting Video</h2>
<p>Watch this video to learn how to count to 10. You can count along with the narrator!</p>
<div class="canvas-wrapper">
  <canvas id="tutorialCanvas" width="800" height="400"></canvas>
</div>
<div class="controls">
  <button id="playTutorial" class="secondary">â–¶ï¸ Play Video</button>
</div>
<div class="settings">
  <label>Speed: <input type="number" id="videoSpeed" value="1" min="0.5" max="2" step="0.1"></label>
</div>
</section>

<section aria-labelledby="practiceTitle">
<h2 id="practiceTitle">Let's Practice!</h2>
<p>Look at the pictures and count how many you see. Type the number in the box.</p>
<div class="grid cols-4" style="margin-top:10px">
  <div class="tile">
    <div style="font-weight:700">1) How many suns? â˜€ï¸</div>
    <div id="q1Image" style="font-size:3rem; margin:10px 0;">â˜€ï¸â˜€ï¸â˜€ï¸</div>
    <input id="q1" type="text" placeholder="e.g. 3">
    <div style="margin-top:6px"><button onclick="check('q1','3')">Check</button></div>
    <div id="r1" class="answer"></div>
  </div>
  <div class="tile">
    <div style="font-weight:700">2) How many flowers? ğŸŒ¸</div>
    <div id="q2Image" style="font-size:3rem; margin:10px 0;">ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸</div>
    <input id="q2" type="text" placeholder="e.g. 5">
    <div style="margin-top:6px"><button onclick="check('q2','5')">Check</button></div>
    <div id="r2" class="answer"></div>
  </div>
  <div class="tile">
    <div style="font-weight:700">3) How many stars? â­</div>
    <div id="q3Image" style="font-size:3rem; margin:10px 0;">â­â­â­â­â­â­</div>
    <input id="q3" type="text" placeholder="e.g. 6">
    <div style="margin-top:6px"><button onclick="check('q3','6')">Check</button></div>
    <div id="r3" class="answer"></div>
  </div>
  <div class="tile">
    <div style="font-weight:700">4) How many balloons? ğŸˆ</div>
    <div id="q4Image" style="font-size:3rem; margin:10px 0;">ğŸˆğŸˆğŸˆğŸˆ</div>
    <input id="q4" type="text" placeholder="e.g. 4">
    <div style="margin-top:6px"><button onclick="check('q4','4')">Check</button></div>
    <div id="r4" class="answer"></div>
  </div>
</div>
</section>

<section aria-labelledby="speedTitle">
<h2 id="speedTitle">âš¡ Speedy Counting!</h2>
<p>Count the animals as fast as you can. Type the number and hit Submit!</p>
<div class="controls">
  <label>Duration:
    <select id="quizDuration">
      <option value="30">30s</option>
      <option value="60" selected>60s</option>
      <option value="90">90s</option>
    </select>
  </label>
  <button id="startQuiz" class="warn">Start Quiz</button>
  <button id="stopQuiz" class="ghost">Stop</button>
  <div class="muted" id="quizTimer">Time: 0</div>
  <div id="quizScore" class="pill">Correct: 0</div>
</div>
<div style="margin-top:12px">
  <div style="font-size:2rem;font-weight:800; text-align: center;" id="quizQ">Press Start</div>
  <div style="margin-top:8px" class="controls">
    <input id="quizInput" type="text" placeholder="Count">
    <button id="quizCheck" class="secondary">Submit</button>
    <div id="quizFeedback" class="answer"></div>
  </div>
</div>
</section>

<footer>Have fun counting everything you see! ğŸ‰</footer>
</main>

<script>
/* ===== Utilities ===== */
const tone=(f=880,d=0.06)=>{try{const A=new (window.AudioContext||window.webkitAudioContext)();const o=A.createOscillator();const g=A.createGain();o.type='sine';o.frequency.value=f;g.gain.value=0.0001;o.connect(g);g.connect(A.destination);o.start();g.gain.exponentialRampToValueAtTime(0.12,A.currentTime+0.01);g.gain.exponentialRampToValueAtTime(0.0001,A.currentTime+d);setTimeout(()=>{o.stop();A.close().catch(()=>{});},d*1000+50);}catch(e){}};
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

/* ===== Score & CSV ===== */
let totalScore=0, streak=0, csvData=[];
function updateScore(points,q='',a=''){if(points>0){ totalScore+=points; streak++;}else{streak=0;} document.getElementById('score').textContent=`Score: ${totalScore}`; document.getElementById('streak').textContent=`Streak: ${streak}`; if(q&&a)csvData.push([q,a]);}
window.check = (inputId,correct)=>{const val=document.getElementById(inputId).value.trim(); const res=document.getElementById('r'+inputId.replace(/[^\d]/g,'')); if(val===correct){res.textContent='âœ… Correct!'; res.className='answer ok'; tone(880,0.06); updateScore(1,document.getElementById(inputId).previousElementSibling.textContent,correct);}else{res.textContent=`âŒ Wrong (Answer: ${correct})`; res.className='answer bad'; tone(220,0.06); updateScore(0,document.getElementById(inputId).previousElementSibling.textContent,correct);}}

/* ===== Canvas Tutorial ===== */
const tutorialCanvas = document.getElementById('tutorialCanvas');
const ctx = tutorialCanvas.getContext('2d');
const tutorialSpeedInput = document.getElementById('videoSpeed');
const voice = window.speechSynthesis.getVoices().find(v => v.name.includes('female') || v.name.includes('F')); // Find a female voice

function drawNumber(number, count, total) {
    const textX = tutorialCanvas.width / 2;
    const textY = tutorialCanvas.height / 2;
    const textScale = 0.5 + 0.5 * (count / total);

    ctx.clearRect(0, 0, tutorialCanvas.width, tutorialCanvas.height);
    ctx.font = `${100 * textScale}px Arial`;
    ctx.textAlign = 'center';
    ctx.fillStyle = '#6b21a8';
    ctx.fillText(number.toString(), textX, textY);
    
    // Draw circles for counting
    const startY = textY + 50;
    const spacing = 50;
    const startX = textX - ((count - 1) / 2) * spacing;
    for(let i = 0; i < count; i++){
        ctx.beginPath();
        ctx.arc(startX + i * spacing, startY, 20, 0, 2 * Math.PI);
        ctx.fillStyle = '#c084fc';
        ctx.fill();
    }
}

const tutorialSteps = [
    { audio: "Let's count! One.", count: 1 },
    { audio: "Two.", count: 2 },
    { audio: "Three.", count: 3 },
    { audio: "Four.", count: 4 },
    { audio: "Five.", count: 5 },
    { audio: "Six.", count: 6 },
    { audio: "Seven.", count: 7 },
    { audio: "Eight.", count: 8 },
    { audio: "Nine.", count: 9 },
    { audio: "And ten!", count: 10 },
    { audio: "Great job! Now you know how to count all the way to ten.", count: 10 }
];

let tutorialIndex = 0;
function playTutorialVideo(callback) {
  tutorialIndex = 0;
  const speed = parseFloat(tutorialSpeedInput.value) || 1;
  function nextStep() {
    if (tutorialIndex >= tutorialSteps.length) {
      if (callback) callback();
      return;
    }
    const step = tutorialSteps[tutorialIndex];
    drawNumber(step.count, step.count, 10);
    const utter = new SpeechSynthesisUtterance(step.audio);
    utter.rate = speed;
    utter.pitch = 1.2;
    utter.volume = 1;
    if(voice) utter.voice = voice;
    utter.onend = () => {
      tutorialIndex++;
      nextStep();
    };
    utter.onerror = () => {
      tutorialIndex++;
      nextStep();
    };
    speechSynthesis.speak(utter);
  }
  nextStep();
}
document.getElementById('playTutorial').addEventListener('click', () => playTutorialVideo());
drawNumber(1, 1, 1);

/* ===== Speed Quiz ===== */
const animals = ['ğŸ¶', 'ğŸ±', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼'];
let quizTimerInt = null, quizTime = 0, quizScore = 0, currentQuiz = null;

function generateQuizQuestion() {
    const count = getRandomInt(1, 10);
    const emoji = animals[getRandomInt(0, animals.length - 1)];
    const question = emoji.repeat(count);
    const answer = count.toString();
    return { q: question, a: answer };
}

function newQuizQuestion() {
    currentQuiz = generateQuizQuestion();
    document.getElementById('quizQ').textContent = currentQuiz.q;
    document.getElementById('quizInput').value = '';
    document.getElementById('quizFeedback').textContent = '';
}

document.getElementById('startQuiz').addEventListener('click', () => {
    quizTime = parseInt(document.getElementById('quizDuration').value, 10);
    quizScore = 0;
    document.getElementById('quizScore').textContent = `Correct: ${quizScore}`;
    newQuizQuestion();
    clearInterval(quizTimerInt);
    quizTimerInt = setInterval(() => {
        quizTime--;
        document.getElementById('quizTimer').textContent = `Time: ${quizTime}s`;
        if (quizTime <= 0) {
            clearInterval(quizTimerInt);
            document.getElementById('quizQ').textContent = 'Time Up!';
        }
    }, 1000);
});
document.getElementById('stopQuiz').addEventListener('click', () => {
    clearInterval(quizTimerInt);
});
document.getElementById('quizCheck').addEventListener('click', () => {
    const val = document.getElementById('quizInput').value.trim();
    const f = document.getElementById('quizFeedback');
    if (val === currentQuiz.a) {
        f.textContent = 'âœ… Correct!';
        f.className = 'answer ok';
        quizScore++;
        document.getElementById('quizScore').textContent = `Correct: ${quizScore}`;
        tone(880, 0.06);
    } else {
        f.textContent = `âŒ Wrong (Answer: ${currentQuiz.a})`;
        f.className = 'answer bad';
        tone(220, 0.06);
    }
    if (quizTime > 0) newQuizQuestion();
});
</script>
</body>
</html>
